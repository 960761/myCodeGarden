### 1.	selectCity
示例代码中给出的pageState.nowSelectCity是Index 数字值，每次使用 城市 时还需要再转换为 options value，因此，可以将其改为string值，不用每次都进行转换。
### 2.	全局变量的使用
源数据，图表数据，city-ele，time-ele，时间和城市元素都是经常用到的变量，可以放到全局中，就不需要每次再重新获取了。
### 3.	事件处理函数
DOM0级使用 ele.onclick = function(){};  
DOM2级使用 addEventListener(“click”, function(){}, false)；  
目前大多数浏览器都支持DOM2级，IE中还有单独的函数：attachEvent, detachEvent。  
### 4.	initAqiChartData()的实现
这个函数用来将源数据进行处理，用于图像的显示。这一步处理非常重要，关键是弄清楚图表显示需要什么样子的数据格式。  
在一开始我没有弄明白，后来看示例代码才得到启示。示例代码中给出的数据为，  
根据三种时间粒度给出的三个目标数据对象： day={}, week={}, month={}，  
当然也可以以城市粒度为标准，但是这样就会有更多个变量，而且城市的个数是不固定的，所以使用时间粒度为标准来存储目标数据最恰当。  
这里使用了复杂的object结构，对象里面套对象，在操作时保持清晰的逻辑非常重要，否则非常容易出错。  
而且数据形式的构建也非常重要，示例代码中的目标数据格式个人感觉有些复杂，于是我进行了精简，  
Day数据就直接使用原数据，day-value； week数据使用 Index-value；month数据使用year-month: value。  
在处理month数据时，本来是使用month-value的，但是有一个问题，2015年的12月会放到2016.1月的后面，因此，为了保持时间的先后顺序，这里加入year的信息。
### 5.	时间粒度的处理细节
这里关于时间粒度的展现形式其实有很多细节的地方要考虑，

对于day的展现没什么需要考虑的； 

对于week的展现，要求是自然周，就是周一到周日，或者周日到周六，这个都还问题不大，关键是对于数据开头和结尾的不完整周怎么处理，
是砍去，还是按照实际天数当作一个自然周处理。两种方式下的处理代码是不一样的，
我在这里使用了第二种方式，即不完整周也计算在内了，而且不放到月里面，也即只针对给出的原数据，依次计算为第1，2…周，没有详细到第几个月的第几周，
而且因为不完全周的存在，也没有办法跟月份完全对应。

对于month的展现，要求是自然月，还是涉及到不完整月的处理，我在这里也是使用了全部包含进来的处理方法，  
而且因为如果只是按照月份的话，有可能会出现2015.12放在2016.1后面的情况，因此这里将year的信息也放了进来，  
而且我也认为，针对month，加入年的信息，和year对应比较妥当，而不应该像week一样依次计数。  

关于示例代码中的处理：  
示例代码中的实现好像并不是自然周，而是从一开始计算7天完整为一周，而不管具体是周几。    
关于月的处理，是针对具体给出的数据，根据2016-01-31，2016-02-29等来判断月份结束的，  
这种处理方式完全不具有灵活性，只能针对例子中给出的数据，所以并不太好。  

关于我的实现：    
如何判断开头和结尾不完整周/月，及如何判断整周/月的开始和结束 是最为关键的地方。  
我在处理的时候并没有针对具体给出的数据，所以灵活性应该比给出的示例代码要好一些，但是实现逻辑可能还可以进一步完善。  
### 6.	关于时区的细节问题
有一个细节， 
给出的示例数据是从2016-01-01开始，因为我在美国服务器上面实现，所以2016-01-01就成了2015-12-31，导致月份上面多出了2015-12的一天，  
但是在day显示的时候却是从2016-01-01开始的。  
具体造成这个的原因可能是，  
在获取month, year的时候，都使用了  new Date()用来getDay(), getMonth()，  
而使用这个的时候就会将2016-01-01转换为对应时区的时间，  
所以导致week, month都会出现2015-12-31，而在获取day的时候直接赋给的值，所以没有这个问题。 

如何避免这个问题？  
要么全部使用给出的string值获取week, month值，要么全部使用new Date()得到的日期获取week, month值，  
因为获取which day of week需要使用Date类型的getDay()函数，所以只能使用 new Date()的方式。  
也即需要将给出的2016-01-01 string通过 new Date()重新获取拼接得到。  
### 7.	使用DOM实现柱状图
这里的一个关键是将container设置为 display:flex；  
还有一个关键是拼接html  的构建，可以现在html 中写出一两个，然后再放到拼接字符串中进行相应修改和变量替换。  
### 8.	Event target的使用
在time change, city change中，有一个是要判断选项是否发生变化的功能，逻辑是，获取pageState中的保存值和element中的选中值进行比较，  
在获取element选中值的时候使用event.target.value非常方便，不用再使用DOM获取元素再获取了。  
尤其是time change时，获取radio  checked  value 还有些麻烦。  
### 9.	编程最佳实践
一开始构建整体框架非常重要，框架搭成后基本上就实现了一半。
